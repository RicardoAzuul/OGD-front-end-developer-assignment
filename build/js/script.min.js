const account_info_api_url="http://localhost:8080/api/getbalance";async function getAccountInfo(){const e=await fetch(account_info_api_url);if(!e.ok){const m=e.status,u=e.statusText,r=e.url;function t(){var e=document.createElement("BR");document.getElementById("accountInformation").appendChild(e)}document.getElementById("accountInformation").innerHTML="";var n=document.getElementById("transactions");n.parentNode.removeChild(n),t();var c=document.createElement("H1"),o=document.createTextNode("Apologies!");c.appendChild(o),document.getElementById("accountInformation").appendChild(c),t();var a=document.createElement("P");o=document.createTextNode("We are unable to show your account balance at this time.");a.appendChild(o),document.getElementById("accountInformation").appendChild(a),t();o=document.createTextNode("HTTP status code: "+m);document.getElementById("accountInformation").appendChild(o),t();o=document.createTextNode("HTTP status text: "+u);document.getElementById("accountInformation").appendChild(o),t();o=document.createTextNode("URL: "+r);document.getElementById("accountInformation").appendChild(o),t(),t();var d=document.createElement("a");o=document.createTextNode("Try again");d.appendChild(o),d.href="index.html",document.getElementById("accountInformation").appendChild(d),t(),t()}const m=await e.json();document.getElementById("name").textContent=m.account.name,document.getElementById("iban").textContent=m.account.iban,document.getElementById("balance").textContent=m.account.balance,document.getElementById("currency").textContent=m.currency;for(const e of m.debitsAndCredits){var u=Object.entries(e),r=document.createElement("TR"),l=0,i=!1;for(const e of u){if("to"===e[0])i=!0;if(2===l){var p=e[1]+"",s=p.indexOf(".")+1;if(0===s)var f=e[1]+".00";else if(p.slice(s).length<2)f=e[1]+"0";else f=e[1];if(!0===i)f="-"+f+" "+m.currency,i=!1;else f=f+" "+m.currency}else if(3===l)f=e[1].replace("T"," ").replace(":00.000Z","");else f=e[1];var I=document.createElement("TD");o=document.createTextNode(f);I.appendChild(o),r.appendChild(I),l++}document.getElementById("debitsAndCredits").appendChild(r)}}getAccountInfo();
